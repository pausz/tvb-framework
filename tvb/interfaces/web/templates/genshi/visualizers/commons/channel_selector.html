<!--! This component is used to generate a channels selector. The genshi function expects as inputs:
    @param noOfColumns: in how many columns should the checkboxes be spread
    @param title: the title of the selection box
    @param divId: the id of the top level div
    @param groupedOptions: a collection of option groups. an opntion group is a tuple : group name, [ (value, name)]
    @param initialSelection: a collection of the initially selected values
    @param namedSelections: a collection of tuples [(selectionName, selectionValueList)]
-->
<div xmlns:py="http://genshi.edgewall.org/" xmlns:xi="http://www.w3.org/2001/XInclude" py:strip="True">
    <py:def function="drawRegionSelector(title, divId, groupedOptions, initialSelection=[], namedSelections=[])">
        <div id='${divId}' class="regionSelector">
            <h5>$title</h5>
            <div class="selection-toolbar">
                <!--! <button class="action action-view">Apply selection</button> -->
                <button class="action action-all-on">&nbsp;</button>
                <button class="action action-all-off">&nbsp;</button>
                <select>
                    <xi:include href="channel_selector_opts.html" />
                </select>
                <input type="text" />
                <button class="action action-store">Save</button>
            </div>

            <section py:for="groupName, options in groupedOptions"
                     py:with="noOfColumns = 8/len(groupedOptions); sectionWidth=100/len(groupedOptions)"
                     class="submatrix" style="width:${sectionWidth}%">
                <h5>$groupName</h5>
                <table>
                    <tr py:for="i in xrange(0, len(options), noOfColumns)">
                        <td py:for="j in xrange(i, min(i + noOfColumns, len(options)))">
                            <label>
                                <input type='checkbox' autocomplete="off"
                                       value="${options[j][0]}"
                                       checked="${'checked' if j in initialSelection else None}"/>
                                ${options[j][1]}
                            </label>
                        </td>
                    </tr>
                </table>
            </section>
        </div>
    </py:def>
</div>
